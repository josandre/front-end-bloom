<section class="content">
    <div class="content-block" [hidden]="loading">
        <div class="block-header">
            <!-- breadcrumb -->
            <app-breadcrumb *ngIf="diary !== undefined" [title]="'My Diary'"
                            [active_item]="diary.title | titlecase"></app-breadcrumb>
        </div>
        <div class="row container-diary">

            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 entries-side">
                <ng-scrollbar visibility="hover" [style.height]="550 + 'px'">

                    <div class="card-entries-container">

                        <mat-card class="p-3 card-entry" [ngClass]="{'opened-entry' : entry.id === currentEntryId}"
                                  tabindex="0" *ngFor="let entry of entries"
                                  (click)="setEditorContent(entry)">
                            <div class="row">
                                <div class="col-6">
                                    <div class="entry-content" [innerHTML]="generatePreview(entry.content, 15)">
                                    </div>
                                    <div class="pt-3">
                                        <small>{{ entry.date | date:'shortTime' }}</small>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card-date">
                                        <span class="align-middle week-day">{{ entry.date | date:"E" | uppercase }}</span>
                                        <span class="align-middle">{{ entry.date | date:"M/d" }}</span>
                                    </div>
                                </div>
                            </div>
                        </mat-card>


                    </div>
                </ng-scrollbar>


            </div>
            <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
                <div class="card">
                    <div class="m-l-10 p-2">
                        <button mat-mini-fab color="primary" class="float-end mx-3" (click)="addEntry()">
                            <mat-icon>add</mat-icon>
                        </button>
                        <div class="tool-buttons" *ngIf="!editorHidden">
                            <button mat-mini-fab (click)="closeEditor()">
                                <mat-icon>close</mat-icon>
                            </button>
                            <button mat-mini-fab>
                                <mat-icon>smart_toy</mat-icon>
                            </button>
                            <button mat-mini-fab (click)="saveEntry()" *ngIf="entryWasCreated">
                                <mat-icon>save</mat-icon>
                            </button>
                            <button mat-icon-button [matMenuTriggerFor]="moreToolsMenu" *ngIf="entryWasCreated" aria-label="icon-button with a menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #moreToolsMenu="matMenu">
                                <button mat-menu-item>
                                    <mat-icon class="icon-color">loyalty</mat-icon>
                                    <span>Tags</span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon class="icon-color">info</mat-icon>
                                    <span>Details</span>
                                </button>
                              <button mat-menu-item (click)="deleteEntry()">
                                <mat-icon class="icon-color">delete</mat-icon>
                                <span>Delete</span>
                              </button>
                            </mat-menu>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <ckeditor [hidden]="editorHidden" #editor [editor]="Editor" [data]="editorContent">prueba
                            </ckeditor>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="loading" class="center">
        <mat-spinner></mat-spinner>
    </div>
</section>

